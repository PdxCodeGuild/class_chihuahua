{%extends 'base.html'%} {%block content%}
<div class='container mt-4'>
  <div>
    <canvas id="myChart"></canvas>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

    fetch('http://127.0.0.1:8000/api/products/')
    .then(res=>res.json())
    .then(payload=>{
      console.log(payload)
      const labelProducts = payload.map(elem=>elem.title)
      const quantities = payload.map(elem=>elem.quantity)
      const labels = labelProducts;

    const data = {
      labels: labels,
      datasets: [{
        label: 'My First dataset',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: quantities,
      }]
    };

    const config = {
      type: 'bar',
      data: data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      },
    };
    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );


    })
   
  </script>


  {%endblock%}